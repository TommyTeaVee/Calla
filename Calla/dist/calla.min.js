var Calla=function(e){"use strict";function t(e,...t){for(const i of t)for(const t of e)if(i(t))return t;return null}function i(e,t,i){return typeof e===t||e instanceof i}function n(e){return i(e,"function",Function)}function s(e){return i(e,"boolean",Boolean)}function r(e){return i(e,"number",Number)}function o(e){return d(e)&&i(e,"object",Object)}function a(e){return null==e}function d(e){return!a(e)}function c(e){return e}function u(e,t,i){return function(e,t,i){let n=0,s=e.length,r=Math.floor((n+s)/2),o=!1;for(;n<s&&r<e.length;){const c=e[r],u=a(c)?null:i(c);d(u)&&t<u?s=r:(t===u&&(o=!0),n=r+1),r=Math.floor((n+s)/2)}return o||(r+=.5),r}(e,(i=i||c)(t),i)}function l(e,t,i,r){let o;n(i)?o=i:s(i)&&(r=i),a(r)&&(r=!0);let d=u(e,t,o);const c=d%1==0;return d|=0,c&&!r||function(e,t,i){e.splice(i,0,t)}(e,t,d),d}class h extends Event{constructor(e){super(e)}}class v extends class{listeners=new Map;listenerOptions=new Map;addEventListener(e,t,i){if(n(t)){let n=this.listeners.get(e);n||(n=new Array,this.listeners.set(e,n)),n.find((e=>e===t))||(n.push(t),i&&this.listenerOptions.set(t,i))}}removeEventListener(e,t){if(n(t)){const i=this.listeners.get(e);i&&this.removeListener(i,t)}}removeListener(e,t){const i=e.findIndex((e=>e===t));i>=0&&(!function(e,t){e.splice(t,1)[0]}(e,i),this.listenerOptions.has(t)&&this.listenerOptions.delete(t))}dispatchEvent(e){const t=this.listeners.get(e.type);if(t)for(const i of t){const n=this.listenerOptions.get(i);d(n)&&!s(n)&&n.once&&this.removeListener(t,i),i.call(this,e)}return!e.defaultPrevented}}{mappedCallbacks=new Map;addEventListener(e,t,i){if(this.checkAddEventListener(e,t)){let n=this.mappedCallbacks.get(t);null==n&&(n=e=>t(e),this.mappedCallbacks.set(t,n)),super.addEventListener(e,n,i)}}checkAddEventListener(e,t){return!0}removeEventListener(e,t){const i=this.mappedCallbacks.get(t);i&&super.removeEventListener(e,i)}dispatchEvent(e){return this.onDispatching(e),super.dispatchEvent(e)}onDispatching(e){}}class f{key;value;bySetAttribute;tags;constructor(e,t,i,...n){this.key=e,this.value=t,this.bySetAttribute=i,this.tags=n.map((e=>e.toLocaleUpperCase())),Object.freeze(this)}apply(e){const t=this.key.startsWith("data-");if(0===this.tags.length||this.tags.indexOf(e.tagName)>-1||t)if(t){const t=this.key.substring(5);e.dataset[t]=this.value}else"style"===this.key?Object.assign(e.style,this.value):this.bySetAttribute?e.setAttribute(this.key,this.value):this.key in e?e[this.key]=this.value:!1===this.value?e.removeAttribute(this.key):!0===this.value?e.setAttribute(this.key,""):e.setAttribute(this.key,this.value);else console.warn(`Element ${e.tagName} does not support Attribute ${this.key}`)}}function p(e){return new f("autoplay",e,!1,"audio","video")}function g(e){return new f("playsInline",e,!1,"audio","video")}class m{key;value;name;constructor(e,t){this.key=e,this.value=t,this.name=e.replace(/[A-Z]/g,(e=>"-"+e.toLocaleLowerCase()))}apply(e){e[this.key]=this.value}}class I{rest;constructor(...e){this.rest=e}apply(e){for(const t of this.rest)t.apply(e)}}function A(...e){return new I(...e)}function w(e){return new m("display",e)}function y(){return new m("fontFamily","ui-monospace, 'Droid Sans Mono', 'Cascadia Mono', 'Segoe UI Mono', 'Ubuntu Mono', 'Roboto Mono', Menlo, Monaco, Consolas, monospace")}function D(e){return o(e)&&"element"in e&&e.element instanceof Node}function _(e){return o(e)&&"elements"in e&&e.elements instanceof Array}function E(e,...t){let n=null;for(const e of t)if(e instanceof f){if("id"===e.key){n=document.getElementById(e.value);break}if("selector"===e.key){n=document.querySelector(e.value);break}}null==n&&(n=document.createElement(e));for(let e of t)null!=e&&(e instanceof I?e.apply(n.style):i(e,"string",String)||r(e)||s(e)||e instanceof Date||e instanceof Node||D(e)?(D(e)?e=e.element:e instanceof Node||(e=document.createTextNode(e.toLocaleString())),n.appendChild(e)):_(e)?n.append(...e.elements):(e instanceof Function&&(e=e(!0)),e instanceof f&&"selector"===e.key||e.apply(n)));return n}function L(e){for(;e.lastChild;)e.lastChild.remove()}function b(...e){return E("div",...e)}const C=n(HTMLAudioElement.prototype.setSinkId);class S extends h{audio;video;constructor(e,t){super("inputschanged"),this.audio=e,this.video=t}}class k extends h{device;constructor(e){super("audiooutputchanged"),this.device=e}}const P="calla:preferredAudioOutputID",V="calla:preferredAudioInputID",M="calla:preferredVideoInputID";class U extends Event{eventType;constructor(e){super(e),this.eventType=e}}class O extends U{id;constructor(e,t){super(e),this.id=t}}var x,j,R;!function(e){e.Audio="audio",e.Video="video"}(x||(x={})),function(e){e.Added="added",e.Removed="removed",e.Changed="changed"}(j||(j={})),function(e){e.Disconnected="Disconnected",e.Connecting="Connecting",e.Connected="Connected",e.Disconnecting="Disconnecting"}(R||(R={}));const N="local-user";let T="localhost"===window.location.hostname||/\bdebug\b/.test(window.location.search);"chrome"in globalThis&&navigator.userAgent.match("CriOS"),/^((?!chrome|android).)*safari/i.test(navigator.userAgent),/Opera/.test(navigator.userAgent),/Android/.test(navigator.userAgent),/iPad|iPhone|iPod/.test(navigator.platform)||/Macintosh(.*?) FxiOS(.*?)\//.test(navigator.platform)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints,/Macintosh/.test(navigator.userAgent||""),/BlackBerry/.test(navigator.userAgent),/(UC Browser |UCWEB)/.test(navigator.userAgent);const F=/oculus/i.test(navigator.userAgent);var $;F&&/pacific/i.test(navigator.userAgent),F&&/quest/i.test(navigator.userAgent),F&&/quest 2/i.test(navigator.userAgent),/Mobile VR/.test(navigator.userAgent),function(e){e.Log="log",e.Delete="delete",e.Clear="clear"}($||($={}));function W(e,t){return A(new m("gridColumn",`${e}/${t}`),y())}const B=new class{logs=new Map;rows=new Map;container;grid;workerCount=0;constructor(){this.container=b(A(new m("position","fixed"),w("none"),function(e){return new m("top",e)}("0"),function(e){return new m("left",e)}("0"),function(e){return new m("width",e)}("100%"),function(e){return new m("height",e)}("100%"),function(e){return new m("zIndex",e.toFixed(0))}(9001),function(e){return new m("padding",e)}("1em"),function(e){return new m("opacity",e)}("0.5"),function(e){return new m("backgroundColor",e)}("black"),function(e){return new m("color",e)}("white"),function(e){return new m("overflow",e)}("hidden"),function(e){return new m("pointerEvents",e)}("none")),this.grid=b(A(w("grid"),function(e){return new m("overflowY",e)}("auto"),function(e){return new m("columnGap",e)}("0.5em"),function(e){return new m("gridAutoFlow",e)}("row")))),document.body.appendChild(this.container),window.addEventListener("keypress",(e=>{(function(e){return!(e.shiftKey||e.altKey||e.ctrlKey||e.metaKey)})(e)&&"`"===e.key&&function(e,t,i="block"){e.style.display=t?i:"none"}(this.container,"none"===this.container.style.display)}))}render(){const e=new Array;for(const[t,i]of this.rows)if(!this.logs.has(t)){for(const e of i)this.grid.removeChild(e);e.push(t)}for(const t of e)this.rows.delete(t);let t=0;for(const e of this.logs.values())t=Math.max(t,e.length);this.grid.style.gridTemplateColumns=`auto repeat(${t}, 1fr)`;for(const[e,t]of this.logs){let n=this.rows.get(e);n||(n=[b(e,W(1,2)),...t.map(((e,i)=>b(W(i+2,i===t.length-1?-1:i+3))))],this.rows.set(e,n),this.grid.append(...n));for(let e=0;e<t.length;++e){const s=t[e],r=n[e+1];L(r),r.appendChild((i=JSON.stringify(s),document.createTextNode(i)))}}var i}log(e,...t){this.logs.set(e,t),this.render()}delete(e){this.logs.delete(e),this.render()}clear(){this.logs.clear(),this.render()}addWorker(e,t){t.addEventListener("message",(t=>{const i=`worker:${e||this.workerCount.toFixed(0)}:`;if(d(n=t.data)&&"key"in n&&"XXX_QUAKE_LOGGER_XXX"===n.key)switch(t.data.method){case $.Log:this.log(i+t.data.id,...t.data.values);break;case $.Delete:this.delete(i+t.data.id);break;case $.Clear:for(const e of this.logs.keys())e.startsWith(i)&&this.delete(e);break;default:!function(e,t){throw new Error((t||"Unexpected object: ")+e)}(t.data.method)}var n})),++this.workerCount}};class z{log(e,...t){B.log(e,...t)}delete(e){B.delete(e)}clear(){B.clear()}addWorker(e,t){B.addWorker(e,t)}}class X extends Event{id=null;isActive=!1;constructor(){super("audioActivity"),Object.seal(this)}set(e,t){this.id=e,this.isActive=t}}var J;!function(e){e.InConference="in-conference",e.JoiningConference="joining-conference",e.Connected="connected",e.Connecting="connecting",e.Prepaired="prepaired",e.Prepairing="prepairing",e.Unprepared="unprepaired"}(J||(J={}));const K=new X;var q="1.0.0";return console.info("Calla v1.0.0."),e.BaseMetadataClient=class extends v{async getNext(e,t){return new Promise((i=>{const n=s=>{s instanceof O&&s.id===t&&(this.removeEventListener(e,n),i(s))};this.addEventListener(e,n)}))}get isConnected(){return this.metadataState===R.Connected}setLocalPose(e,t,i,n,s,r,o,a,d){this.callInternal("userPosed",e,t,i,n,s,r,o,a,d)}tellLocalPose(e,t,i,n,s,r,o,a,d,c){this.callInternalSingle(e,"userPosed",t,i,n,s,r,o,a,d,c)}setLocalPointer(e,t,i,n,s,r,o,a,d,c){this.callInternal("userPointer",e,t,i,n,s,r,o,a,d,c)}setAvatarEmoji(e){this.callInternal("setAvatarEmoji",e)}tellAvatarEmoji(e,t){this.callInternalSingle(e,"setAvatarEmoji",t)}setAvatarURL(e){this.callInternal("setAvatarURL",e)}tellAvatarURL(e,t){this.callInternalSingle(e,"setAvatarURL",t)}emote(e){this.callInternal("emote",e)}chat(e){this.callInternal("chat",e)}},e.BaseTeleconferenceClient=class extends v{_audio;needsVideoDevice;toggleLogging(){T=!T}localUserID=null;localUserName=null;roomName=null;fetcher;_connectionState=R.Disconnected;_conferenceState=R.Disconnected;hasAudioPermission=!1;hasVideoPermission=!1;get connectionState(){return this._connectionState}setConnectionState(e){this._connectionState=e}get conferenceState(){return this._conferenceState}setConferenceState(e){this._conferenceState=e}constructor(e,t,i=!1){super(),this._audio=t,this.needsVideoDevice=i,this.fetcher=e,this.devices.addEventListener("inputschanged",this.onInputsChanged.bind(this)),this.addEventListener("serverConnected",this.setConnectionState.bind(this,R.Connected)),this.addEventListener("serverFailed",this.setConnectionState.bind(this,R.Disconnected)),this.addEventListener("serverDisconnected",this.setConnectionState.bind(this,R.Disconnected)),this.addEventListener("conferenceJoined",this.setConferenceState.bind(this,R.Connected)),this.addEventListener("conferenceFailed",this.setConferenceState.bind(this,R.Disconnected)),this.addEventListener("conferenceRestored",this.setConferenceState.bind(this,R.Connected)),this.addEventListener("conferenceLeft",this.setConferenceState.bind(this,R.Disconnected))}get audio(){return this._audio}get devices(){return this._audio.devices}onDispatching(e){e instanceof O&&(null==e.id||"local"===e.id)&&(this.localUserID===N?e.id=null:e.id=this.localUserID)}async getNext(e,t){return new Promise((i=>{const n=s=>{s instanceof O&&s.id===t&&(this.removeEventListener(e,n),i(s))};this.addEventListener(e,n)}))}async connect(){this.setConnectionState(R.Connecting)}async join(e,t){this.setConferenceState(R.Connecting)}async leave(){this.setConferenceState(R.Disconnecting)}async disconnect(){this.setConnectionState(R.Disconnecting)}},e.Client=class extends v{_fetcher;_tele;_meta;isAudioMuted=null;isVideoMuted=null;constructor(e,t,i){super(),this._fetcher=e,this._tele=t,this._meta=i;const n=this.dispatchEvent.bind(this);this._tele.addEventListener("serverConnected",n),this._tele.addEventListener("serverDisconnected",n),this._tele.addEventListener("serverFailed",n),this._tele.addEventListener("conferenceFailed",n),this._tele.addEventListener("conferenceRestored",n),this._tele.addEventListener("audioMuteStatusChanged",n),this._tele.addEventListener("videoMuteStatusChanged",n),this._tele.addEventListener("conferenceJoined",(async e=>{const t=this.audio.setLocalUserID(e.id);e.pose=t.pose,this.dispatchEvent(e),await this.devices.start()})),this._tele.addEventListener("conferenceLeft",(e=>{this.audio.setLocalUserID(e.id),this.dispatchEvent(e)})),this._tele.addEventListener("participantJoined",(async e=>{e.source=this.audio.createUser(e.id),this.dispatchEvent(e)})),this._tele.addEventListener("participantLeft",(e=>{this.dispatchEvent(e),this.audio.removeUser(e.id)})),this._tele.addEventListener("userNameChanged",n),this._tele.addEventListener("videoAdded",n),this._tele.addEventListener("videoRemoved",n),this._tele.addEventListener("audioAdded",(e=>{const t=this.audio.getUser(e.id);if(t){let i=t.streams.get(e.kind);i&&t.streams.delete(e.kind),i=e.stream,t.streams.set(e.kind,i),e.id!==this._tele.localUserID&&this.audio.setUserStream(e.id,i),this.dispatchEvent(e)}})),this._tele.addEventListener("audioRemoved",(e=>{const t=this.audio.getUser(e.id);t&&t.streams.has(e.kind)&&t.streams.delete(e.kind),e.id!==this._tele.localUserID&&this.audio.setUserStream(e.id,null),this.dispatchEvent(e)})),this._meta.addEventListener("chat",n),this._meta.addEventListener("emote",n),this._meta.addEventListener("setAvatarEmoji",n),this._meta.addEventListener("setAvatarURL",n);const s=e=>{const t=this.audio.getUserOffset(e.id);t&&(e.px+=t[0],e.py+=t[1],e.pz+=t[2]),this.dispatchEvent(e)};this._meta.addEventListener("userPointer",s),this._meta.addEventListener("userPosed",(e=>{this.audio.setUserPose(e.id,e.px,e.py,e.pz,e.fx,e.fy,e.fz,e.ux,e.uy,e.uz),s(e)})),this.audio.addEventListener("audioActivity",(e=>{K.id=e.id,K.isActive=e.isActive,this.dispatchEvent(K)}));const r=this.dispose.bind(this);window.addEventListener("beforeunload",r),window.addEventListener("unload",r),window.addEventListener("pagehide",r),Object.seal(this)}get connectionState(){return this._tele.connectionState}get conferenceState(){return this._tele.conferenceState}get fetcher(){return this._fetcher}get tele(){return this._tele}get meta(){return this._meta}get audio(){return this._tele.audio}get devices(){return this._tele.audio.devices}disposed=!1;dispose(){this.disposed||(this.leave(),this.disconnect(),this.disposed=!0)}get offsetRadius(){return this.audio.offsetRadius}set offsetRadius(e){this.audio.offsetRadius=e}setLocalPose(e,t,i,n,s,r,o,a,d){this.audio.setUserPose(this.localUserID,e,t,i,n,s,r,o,a,d),this._meta.setLocalPose(e,t,i,n,s,r,o,a,d)}tellLocalPose(e,t,i,n,s,r,o,a,d,c){this._meta.tellLocalPose(e,t,i,n,s,r,o,a,d,c)}setLocalPointer(e,t,i,n,s,r,o,a,d,c){this._meta.setLocalPointer(e,t,i,n,s,r,o,a,d,c)}setAvatarEmoji(e){this._meta.setAvatarEmoji(e)}tellAvatarEmoji(e,t){this._meta.tellAvatarEmoji(e,t)}setAvatarURL(e){this._meta.setAvatarURL(e)}tellAvatarURL(e,t){this._meta.tellAvatarURL(e,t)}emote(e){this._meta.emote(e)}chat(e){this._meta.chat(e)}async toggleAudioMuted(){return await this._tele.toggleAudioMuted()}async toggleVideoMuted(){return await this._tele.toggleVideoMuted()}async getAudioMuted(){return await this._tele.getAudioMuted()}async getVideoMuted(){return await this._tele.getVideoMuted()}get metadataState(){return this._meta.metadataState}get localUserID(){return this._tele.localUserID}get localUserName(){return this._tele.localUserName}get roomName(){return this._tele.roomName}userExists(e){return this._tele.userExists(e)}getUserNames(){return this._tele.getUserNames()}async connect(){await this._tele.connect(),this._tele.connectionState===R.Connected&&await this._meta.connect()}async join(e){const t=new z;t.log("Calla.join:tele",e),await this._tele.join(e),this._tele.conferenceState===R.Connected&&(t.log("Calla.join:meta",e),await this._meta.join(e)),t.log("Calla.joined")}async identify(e){await this._tele.identify(e),await this._meta.identify(this.localUserID)}async leave(){await this._meta.leave(),await this._tele.leave()}async disconnect(){await this._meta.disconnect(),await this._tele.disconnect()}async setAudioOutputDevice(e){this.audio.devices.setAudioOutputDevice(e)}async setAudioMuted(e){let t=this.isAudioMuted;return e!==t&&(t=await this.toggleAudioMuted()),t}async setVideoMuted(e){let t=this.isVideoMuted;return e!==t&&(t=await this.toggleVideoMuted()),t}},e.DEFAULT_LOCAL_USER_ID=N,e.DeviceManager=class extends v{needsVideoDevice;element=null;_hasAudioPermission=!1;get hasAudioPermission(){return this._hasAudioPermission}_hasVideoPermission=!1;get hasVideoPermission(){return this._hasVideoPermission}_currentStream=null;get currentStream(){return this._currentStream}set currentStream(e){if(e!==this.currentStream){if(d(this.currentStream)&&this.currentStream.active)for(const e of this.currentStream.getTracks())e.stop();this._currentStream=e}}constructor(e=!1){super(),this.needsVideoDevice=e,C&&(this.element=function(...e){return E("audio",...e)}(g,p,A(w("none"))),document.body.appendChild(this.element))}async setDestination(e){try{if(C&&e.stream!==this.element.srcObject){this.element.srcObject=e.stream;const i=t(await this.getAudioOutputDevices(),(e=>e.deviceId===this.preferredAudioOutputID),(e=>"default"===e.deviceId),(e=>e.deviceId.length>0));i&&await this.setAudioOutputDevice(i),await this.element.play()}}catch(e){console.error(e)}}async start(){await this.enablePreferredAudioInput(),await this.enablePreferredVideoInput()}async enablePreferredAudioInput(){const e=await this.getPreferredAudioInput();e&&await this.setAudioInputDevice(e)}async enablePreferredVideoInput(){const e=await this.getPreferredVideoInput();e&&await this.setVideoInputDevice(e)}get preferredAudioOutputID(){return C?localStorage.getItem(P):null}setPreferredAudioOutputID(e){C&&localStorage.setItem(P,e)}get preferredAudioInputID(){return localStorage.getItem(V)}setPreferredAudioInputID(e){localStorage.setItem(V,e)}get preferredVideoInputID(){return localStorage.getItem(M)}setPreferredVideoInputID(e){localStorage.setItem(M,e)}async getAudioOutputDevices(e=!1){if(!C)return[];const t=await this.getAvailableDevices(e);return t&&t.audioOutput||[]}async getAudioInputDevices(e=!1){const t=await this.getAvailableDevices(e);return t&&t.audioInput||[]}async getVideoInputDevices(e=!1){const t=await this.getAvailableDevices(e);return t&&t.videoInput||[]}async getAudioOutputDevice(){if(!C)return null;const e=this.element&&this.element.sinkId;if(a(e))return null;return t(await this.getAudioOutputDevices(),(t=>t.deviceId===e))}async getAudioInputDevice(){if(a(this.currentStream)||!this.currentStream.active)return null;const e=this.currentStream.getAudioTracks();if(0===e.length)return null;const i=e[0];return t(await this.getAudioInputDevices(),(e=>i.label===e.label))}async getVideoInputDevice(){if(a(this.currentStream)||!this.currentStream.active)return null;const e=this.currentStream.getVideoTracks();if(0===e.length)return null;const i=e[0];return t(await this.getVideoInputDevices(),(e=>i.label===e.label))}async getPreferredAudioInput(){return t(await this.getAudioInputDevices(),(e=>e.deviceId===this.preferredAudioInputID),(e=>"default"===e.deviceId),(e=>e.deviceId.length>0))}async getPreferredVideoInput(){return t(await this.getVideoInputDevices(),(e=>e.deviceId===this.preferredVideoInputID),(e=>this.needsVideoDevice&&e.deviceId.length>0))}async setAudioOutputDevice(e){if(C){if("audiooutput"!==e.kind)throw new Error(`Device is not an audio output device. Was: ${e.kind}. Label: ${e.label}`);this.setPreferredAudioOutputID(e&&e.deviceId||null);const t=this.element,i=t&&t.sinkId;this.preferredAudioOutputID!==i&&(d(this.preferredAudioOutputID)&&await this.element.setSinkId(this.preferredAudioOutputID),this.dispatchEvent(new k(e)))}}async setAudioInputDevice(e){if("audioinput"!==e.kind)throw new Error(`Device is not an audio input device. Was: ${e.kind}. Label: ${e.label}`);this.setPreferredAudioInputID(e&&e.deviceId||null);const t=await this.getAudioInputDevice(),i=t&&t.deviceId;if(this.preferredAudioInputID!==i){const t=await this.getVideoInputDevice();this.dispatchEvent(new S(e,t))}}async setVideoInputDevice(e){if("videoinput"!==e.kind)throw new Error(`Device is not an video input device. Was: ${e.kind}. Label: ${e.label}`);this.setPreferredVideoInputID(e&&e.deviceId||null);const t=await this.getVideoInputDevice(),i=t&&t.deviceId;if(this.preferredVideoInputID!==i){const t=await this.getAudioInputDevice();this.dispatchEvent(new S(t,e))}}async getAvailableDevices(e=!1){let t=await this.getDevices();return e&&(t=function(e){const t=[];for(let i=0;i<e.length;++i){const n=e[i];let s=!1;for(let e=0;e<t.length&&!s;++e){const i=t[e];s=n.kind===i.kind&&i.label.indexOf(n.label)>0}s||t.push(n)}return t}(t)),{audioOutput:C?t.filter((e=>"audiooutput"===e.kind)):[],audioInput:t.filter((e=>"audioinput"===e.kind)),videoInput:t.filter((e=>"videoinput"===e.kind))}}async getDevices(){let e=null;for(let t=0;t<3;++t){e=await navigator.mediaDevices.enumerateDevices();for(const t of e)t.deviceId.length>0&&(this.hasAudioPermission||(this._hasAudioPermission="audioinput"===t.kind&&t.label.length>0),this.needsVideoDevice&&!this.hasVideoPermission&&(this._hasVideoPermission="videoinput"===t.kind&&t.label.length>0));if(this.hasAudioPermission&&(!this.needsVideoDevice||this.hasVideoPermission))break;try{(!this.hasAudioPermission||this.needsVideoDevice&&!this.hasVideoPermission)&&(this.currentStream=await navigator.mediaDevices.getUserMedia({audio:this.preferredAudioInputID&&{deviceId:this.preferredAudioInputID}||!0,video:this.needsVideoDevice&&(this.preferredVideoInputID&&{deviceId:this.preferredVideoInputID}||!0)||!1}))}catch(e){console.warn(e)}}return e=function(e,t){const i=new Array;for(const n of e)l(i,n,t);return i}(e||[],(e=>e.label)),e}async getMediaPermissions(){return await this.getDevices(),{audio:this.hasAudioPermission,video:this.hasVideoPermission}}},e.DeviceManagerAudioOutputChangedEvent=k,e.DeviceManagerInputsChangedEvent=S,e.addLogger=function(e,t){e.addEventListener(t,((...e)=>{T&&console.log(">== CALLA ==<",t,...e)}))},e.canChangeAudioOutput=C,e.version=q,Object.defineProperty(e,"__esModule",{value:!0}),e}({});
//# sourceMappingURL=calla.min.js.map
